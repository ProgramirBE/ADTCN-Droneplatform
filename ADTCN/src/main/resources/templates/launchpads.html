<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Startplaatsen</title>
    <link rel="stylesheet" th:href="@{/launchpads.css}" />
</head>
<body>
<button onclick="window.location.href='/drones'" class="back-button">&larr; Terug</button>
<h1>Startplaatsen</h1>

<div th:if="${selectedDrone != null}" class="drone-info">
    <h2>Geselecteerde Drone</h2>
    <p><strong>ID:</strong> <span th:text="${selectedDrone.droneID}"></span></p>
    <p><strong>Type:</strong> <span th:text="${selectedDrone.type}"></span></p>
    <p><strong>Status:</strong> <span th:text="${selectedDrone.status}"></span></p>
    <p><strong>Batterij:</strong> <span th:text="${selectedDrone.batterij} + '%'"></span></p>
    <p><strong>Locatie:</strong> <span th:text="${selectedDrone.locatie}"></span></p>
</div>

<div th:unless="${selectedDrone != null}" class="drone-info">
    <p>Geen drone geselecteerd. Ga terug naar <a href="/drones">Drones Overzicht</a> om een drone te kiezen.</p>
</div>

<h2>Kies Vluchtstrategie</h2>
<div class="strategy-selection">
    <input type="radio" id="ecoMode" name="consumptionStrategy" value="ecoModeStrategy" checked />
    <label for="ecoMode">Eco Mode (Minder batterijverbruik)</label><br/>
    <input type="radio" id="turboMode" name="consumptionStrategy" value="turboModeStrategy" />
    <label for="turboMode">Turbo Mode (Hoger batterijverbruik)</label>
</div>

<h2>Beschikbare Startplaatsen</h2>
<ul id="startplaatsen">
    <li th:each="pad : ${launchpads}">
        <span th:text="${pad}"></span>
        <form th:action="@{/reserveer-startplaats}" method="post" class="reserve-form">
            <input type="hidden" name="droneId" th:value="${selectedDrone != null ? selectedDrone.droneID : ''}" />
            <input type="hidden" name="locatie" th:value="${pad}" />
            <input type="hidden" name="consumptionStrategy" value="ecoModeStrategy" />
            <button type="submit">Reserveer</button>
        </form>
    </li>
</ul>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const radios = document.querySelectorAll('input[name="consumptionStrategy"]');
        radios.forEach(function(radio) {
            radio.addEventListener('change', function() {
                document.querySelectorAll('form.reserve-form input[name="consumptionStrategy"]').forEach(function(hidden) {
                    hidden.value = radio.value;
                });
            });
        });
    });
</script>
</body>
</html>
